<!DOCTYPE html>
<head>
    
    <html lang="en">
    <meta charset="utf-8">
    <meta name="description" content="UI-1">
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/charts.css">
 
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
    <title>Charts</title>
    
</head>

<body>
    <h1>Select your charts</h1>
    <p>All fields are optional, but allow for more customization.</p>

    <!-- Display checkboxes -->
    <form>
        <div class="polarAreaChart">
            <input type="checkbox" id="polarArea" name="polarArea" onclick="createPolarAreaFields();">
            <label for="polarArea">Polar area chart</label>
        </div>

        <div class="polarAreaTitle" id="paTitle"></div>


        <div class="histogramChart">
            <input type="checkbox" id="histogram" name="histogram" onclick="createHistogramTitle();">
            <label for="histogram">Histogram</label>
        </div>

        <div class="histogramTitle" id="hTitle"></div>


        <div class="lineGraphChart">
            <input type="checkbox" id="lineGraph" name="lineGraph" onclick="createLineGraphFields();">
            <label for="lineGraph">Line graph</label>
        </div>

        <div class="lineGraphTitle" id="lgTitle"></div>


        <div class="scatterPlotChart">
            <input type="checkbox" id="scatterPlot" name="scatterPlot" onclick="createScatterPlotFields();">
            <label for="scatterPlot">Scatter plot</label>
        </div>

        <div class="scatterPlot" id="spTitle"></div>


        <div class="submitButton">
            <button type="submit" class="btn" id="generateCharts" onClick="generate();return false;">Generate Charts</button>
        </div>
    </form>

    <hr>

    <!-- Position generated plots on the page -->
    <div class="chartPositions">

        <div class="innerPositions">
            <canvas id="pa"></canvas>
        </div>

        <div class="innerPositions">
            <canvas id="h"></canvas>
        </div>

        <div class="innerPositions">
            <canvas id="lg"></canvas>
        </div>

        <div class="innerPositions">
            <canvas id="sp"></canvas>
        </div>
        
    </div>

    <script>

        // Global chart values
        var polarArea;
        var histogram;
        var lineGraph;
        var scatterPlot;

        // Global field variables
        var polarAreaTitle;
        var histogramTitle;
        var lineGraphTitle;
        var scatterPlotTitle;
        
        var polarAreaTitleInput = "";
        var histogramTitleInput = "";
        var lineGraphTitleInput = "";
        var scatterPlotTitleInput = "";


        // ---------------------------------------------------------------------------------

        // Generate all selected charts
        function generate() {
            if (document.getElementById('polarArea').checked) { 
                polarAreaTitleInput = document.getElementById('PAtitle').value;
                generatePolarArea(); }
            else { if (polarArea) { polarArea.destroy(); }}

            if (document.getElementById('histogram').checked) { 
                histogramTitleInput = document.getElementById('Htitle').value;
                generateHistogram(); }
            else { if (histogram) { histogram.destroy(); }}

            if(document.getElementById('lineGraph').checked) { 
                lineGraphTitleInput = document.getElementById('LGtitle').value;
                generateLineGraph(); }
            else { if (lineGraph) { lineGraph.destroy(); }}

            if(document.getElementById('scatterPlot').checked) { 
                scatterPlotTitleInput = document.getElementById('SPtitle').value;
                generateScatterPlot(); }
            else { if (scatterPlot) { scatterPlot.destroy(); }}
        }


        // Generate individual charts
        function generatePolarArea() {
            let chart = document.getElementById('pa').getContext('2d');

            polarArea = new Chart(chart, {
                type: 'polarArea',
                data: {
                    datasets: [{
                        data: [100, 20], // dummy
                        backgroundColor: ['red', 'blue'], // dummy
                        borderWidth: 1,
                        borderColor: '#777'
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: polarAreaTitleInput,
                        fontSize: 25
                    },
                    legend: {
                        display: false
                    }
                }
            });
        }


        function generateHistogram() {
            let chart = document.getElementById('h').getContext('2d');

            histogram = new Chart(chart, {
                type: 'bar',
                data: {
                    datasets: [{
                        data: [100], // dummy
                        backgroundColor: ['red'], // dummy
                        borderWidth: 1,
                        borderColor: '#777'
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: histogramTitleInput,
                        fontSize: 25
                    },
                    legend: {
                        display: false
                    }
                }
            });
        }


        function generateLineGraph() {
            let chart = document.getElementById('lg').getContext('2d');

            lineGraph = new Chart(chart, {
                type: 'line',
                data: {
                    datasets: [{
                        data: [100, 200, 300], // dummy
                        borderColor: ['red'], // dummy
                        fill: false
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: lineGraphTitleInput,
                        fontSize: 25
                    },
                    legend: {
                        display: false
                    }
                }
            });
        }


        function generateScatterPlot() {
            let chart = document.getElementById('sp').getContext('2d');

            histogram = new Chart(chart, {
                type: 'scatter',
                data: {
                    datasets: [{
                        data: [{x:100, y:100}], // dummy
                        backgroundColor: ['red'], // dummy
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: scatterPlotTitleInput,
                        fontSize: 25
                    },
                    legend: {
                        display: false
                    }
                }
            });
        }


        // ---------------------------------------------------------------------------------
        
        // Create required user input fields for each chart
        function createPolarAreaFields() {
            // Title
            if (!polarAreaTitle) {
                polarAreaTitle = document.createElement('div');
                polarAreaTitle.innerHTML = "<label for='title'>Title:</label><input type='text' id='PAtitle'>";
                document.getElementById("paTitle").appendChild(polarAreaTitle);
            }
            else { 
                polarAreaTitle.remove(); 
                polarAreaTitle = null;
            }
        }


        function createHistogramTitle() {
            // Title
            if (!histogramTitle) {
                histogramTitle = document.createElement('div');
                histogramTitle.innerHTML = "<label for='title'>Title:</label><input type='text' id='Htitle'>";
                document.getElementById("hTitle").appendChild(histogramTitle);
            }
            else { 
                histogramTitle.remove(); 
                histogramTitle = null;
            }
        }


        function createLineGraphFields() {
            // Title
            if (!lineGraphTitle) {
                lineGraphTitle = document.createElement('div');
                lineGraphTitle.innerHTML = "<label for='title'>Title:</label><input type='text' id='LGtitle'>";
                document.getElementById("lgTitle").appendChild(lineGraphTitle);
            }
            else { 
                lineGraphTitle.remove(); 
                lineGraphTitle = null;
            }
        }


        function createScatterPlotFields() {
            // Title
            if (!scatterPlotTitle) {
                scatterPlotTitle = document.createElement('div');
                scatterPlotTitle.innerHTML = "<label for='title'>Title:</label><input type='text' id='SPtitle'>";
                document.getElementById("spTitle").appendChild(scatterPlotTitle);
            }
            else { 
                scatterPlotTitle.remove(); 
                scatterPlotTitle = null;
            }
        }

    </script>

</body>